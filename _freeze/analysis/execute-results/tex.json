{
  "hash": "ec620ba4ab5401206a91b8eb07730e4e",
  "result": {
    "markdown": "# Analysis\n\n<!-- {{< include _libraries.qmd >}} -->\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## Data Preparation\n\nThis analysis uses the Dialysis dataset introduced previously in the Dataset chapter. Within this context, we restructured the variables, enhancing their meaningfulness and facilitating inferential analysis. Additionally, the mean imputation approach addressed missing values.\n\n## Assumptions\n\nPCA relies on certain assumptions, the fulfillment of which is essential for the validity of this technique.\n\n-   **Linearity**: PCA assumes that the dataset is a linear combination of the variables. The variables exhibit relationships among themselves [@chumney2012pcaefa].\n\n-   **Importance of mean and covariance**: PCA assumes that the directions of maximum variance will contain good features for discrimination.\n\n-   **Correlation between features**: PCA assumes a correlation between features.\n\n-   **Normalization of data**: Normalization of data is necessary to apply PCA. Unscaled data can cause relative comparison problems of the dataset [@chumney2012pcaefa]. In addition, the data should contain no significant outliers.\n\n-   **Orthogonality**: The principal components are orthogonal to each other.\n\n-   **Sampling adequacy**: PCA assumes that there is sampling adequacy.\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n## Feature Scaling\n\n### Standardization\n\nIt is important to Mean-Center the data prior to PCA model building to ensure the first Principal Component is in the direction of maximum variance.\n\n-   Standardization produces Mean, $\\mu$= 0, and Standard Deviation, $\\sigma$ = 1.\n\n-   We can rewrite this as:\n\n    $$\n    Z = \\frac{{x - \\mu}}{{\\sigma}}\n    $$\n\n    $$\n    Z \\sim N(0,1)\n    $$\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Find the index position of the target feature \ntarget_name <- \"expected_survival\"\ntarget_index <- grep(target_name, \n                     colnames(train_data))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Standardization Numerical Features\ntrain_data_sc <- scale(train_data[, -target_index])\n```\n:::\n\n\n\n## PCA Requirements\n\n### Outliers Detection\n\n-   There are some outliers in the data frame including the dependent variable.\n-   However, there are three outliers with no high leverage.\n-   Outliers are important because these can have a disproportionate influence on results.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot a boxplot to visualize potential outliers\nboxplot(train_data, main = \"Outliers Detection\",\n        col = \"steelblue\")\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-9-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Dependent Variable outliers\ntrain_data %>% \n  ggplot(aes(y=expected_survival)) +\n  geom_boxplot(fill=\"steelblue\", alpha=0.75) + \n  xlab(\"Expected Survival\")+\n  ylab(\"\")+\n  ggtitle(\"Dependent Variable Outliers\")\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Leverage\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(my_seed)\n\n# Fit regression model\nordinary_model <- lm(expected_survival ~ ., data = train_data)\n\n# Print the model summary\nsummary(ordinary_model)\n\n# Residual Diagnostics\nols_plot_resid_lev(ordinary_model)\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Removing Outliers\n\nAfter removing one outlier from the dataset, we discovered that the final results produced minimal variability. Therefore, we decided to present a model that captures all the data points' information; thus, no observations will be removed from the final model.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# No Outliers subset\nno_outliers_df <- slice(train_data, -c(56))\n\nset.seed(my_seed)\n\n# Fit regression model\nno_outliers_model <- lm(expected_survival ~ ., data = no_outliers_df)\n\n# Print the model summary\nsummary(no_outliers_model)\n\n# Residual Diagnostics\nols_plot_resid_lev(no_outliers_model)\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Correlations\n\n-   Multicollinearity is present in the data set.\n\n-   28 Correlated features were identified using a threshold = 0.30.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate correlations and round to 2 digits\ncorr_matrix <- cor(train_data_sc)\ncorr_matrix <- round(corr_matrix, digits = 2)\n\n# Print names of highly correlated features; threshold > 0.30\nhigh <- findCorrelation(corr_matrix, cutoff = 0.30, names = TRUE)\n\n# Create a data frame with an index column\nhigh_corr_df <- data.frame(\n  Count = 1:length(high),\n  Feature = high\n)\n\n# table format\nkbl(high_corr_df, caption = \"Highly Correlated Features\") %>%\n  kable_paper(\"hover\")\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-13}Highly Correlated Features}\n\\centering\n\\begin{tabular}[t]{r|l}\n\\hline\nCount & Feature\\\\\n\\hline\n1 & expected\\_transfusion\\\\\n\\hline\n2 & better\\_infection\\\\\n\\hline\n3 & expected\\_hospitalization\\\\\n\\hline\n4 & expected\\_hospital\\_readmission\\\\\n\\hline\n5 & expected\\_fistula\\\\\n\\hline\n6 & prevalent\\_transplant\\_waitlist\\_expected\\\\\n\\hline\n7 & incident\\_transplant\\_waitlist\\_expected\\\\\n\\hline\n8 & expected\\_infection\\\\\n\\hline\n9 & worse\\_survival\\\\\n\\hline\n10 & incident\\_transplant\\_waitlist\\_better\\\\\n\\hline\n11 & better\\_hospital\\_readmission\\\\\n\\hline\n12 & worse\\_transfusion\\\\\n\\hline\n13 & worse\\_hospital\\_readmission\\\\\n\\hline\n14 & worse\\_fistula\\\\\n\\hline\n15 & incident\\_transplant\\_waitlist\\_worse\\\\\n\\hline\n16 & better\\_fistula\\\\\n\\hline\n17 & prevalent\\_transplant\\_waitlist\\_better\\\\\n\\hline\n18 & better\\_survival\\\\\n\\hline\n19 & worse\\_infection\\\\\n\\hline\n20 & phosphorus (5.6 - 7) Mg\\\\\n\\hline\n21 & prevalent\\_transplant\\_waitlist\\_worse\\\\\n\\hline\n22 & phosphorus (3.5 - 4.5) Mg\\\\\n\\hline\n23 & phosphorus > 7Mg\\\\\n\\hline\n24 & better\\_transfusion\\\\\n\\hline\n25 & Hgb 10g\\\\\n\\hline\n26 & hypercalcemia\\_calcium > 10.2Mg\\\\\n\\hline\n27 & pediatric\\_nPCR\\\\\n\\hline\n28 & long\\_term\\_catheter\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ncorrplot::corrplot(corr_matrix, type = \"full\", tl.pos = \"n\")\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-14-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n## Full Model Regression\n\n-   The Adjusted $R^2$ = 99.99% is an indication of over-fitting, or high variance.\n-   This dataset is suitable to apply PCA to find the adequate variance balance.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(my_seed)\n\n# Fit a multiple linear regression model\nfull_model <- lm(expected_survival ~ ., data = train_data)\n\n# Print a summary of the regression model\ntab_model(full_model, title = \"Full Model Regression\", \n          string.p=\"P-value\", string.stat = \"T-score\",\n          string.se = \"Std. Error\",\n          string.resp = \"Response\",\n          string.ci = \"Conf Int.\",\n          show.se=T, show.stat = T,\n           CSS = list(\n             css.depvarhead = 'font-weight: bold; text-align: left;',\n             css.summary = 'color: #10759B; font-weight: bold;'\n           ))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<caption style=\"font-weight: bold; text-align:left;\">Full Model Regression</caption>\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; \">&nbsp;</th>\n<th colspan=\"5\" style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black;\">expected_survival</th>\n</tr>\n<tr>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; text-align:left; \">Predictors</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Estimates</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Std. Error</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Conf Int.</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">T-score</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">P-value</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">93.71</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">41.88</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">5.73&nbsp;&ndash;&nbsp;181.69</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.24</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.038</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">better transfusion</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.75</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.53&nbsp;&ndash;&nbsp;2.62</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.39</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.181</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">expected transfusion</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.07&nbsp;&ndash;&nbsp;0.07</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.974</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">worse transfusion</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.13</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.03&nbsp;&ndash;&nbsp;0.29</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.76</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.096</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">better infection</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.27</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.09</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.46&nbsp;&ndash;&nbsp;-0.07</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.92</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.009</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">expected infection</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.06</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.17&nbsp;&ndash;&nbsp;0.09</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.57</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.574</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">worse infection</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.11</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.27</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.68&nbsp;&ndash;&nbsp;0.46</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.41</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.687</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Kt v 1 2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.25</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.25</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.28&nbsp;&ndash;&nbsp;0.78</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.99</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.335</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Kt v 1 7</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.05</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.11&nbsp;&ndash;&nbsp;0.11</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.996</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">pedriatic Kt v 1 2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.11&nbsp;&ndash;&nbsp;0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.21</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.241</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">pediatric Kt v 1 8</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.02</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.01</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.04&nbsp;&ndash;&nbsp;0.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.89</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.076</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">pediatric nPCR</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.01&nbsp;&ndash;&nbsp;0.10</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.75</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.097</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">better fistula</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.18</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.11</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.41&nbsp;&ndash;&nbsp;0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.101</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">expected fistula</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.01</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.15&nbsp;&ndash;&nbsp;0.16</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.935</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">worse fistula</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.11</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.25&nbsp;&ndash;&nbsp;0.19</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.28</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.780</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">long term catheter</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.31</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.07</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.16&nbsp;&ndash;&nbsp;0.47</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.19</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">hypercalcemia calcium ><br>10 2Mg</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.19</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.09</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.37&nbsp;&ndash;&nbsp;-0.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.13</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.048</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">phosphorus < 3 5Mg</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.35</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.48</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.66&nbsp;&ndash;&nbsp;1.36</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.476</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">phosphorus (3 5 - 4 5) Mg</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.46</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.71&nbsp;&ndash;&nbsp;-0.76</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;3.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.002</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">phosphorus (4 6 - 5 5) Mg</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.36</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.46</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.33&nbsp;&ndash;&nbsp;-0.40</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.97</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.008</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">phosphorus (5 6 - 7) Mg</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.80</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.44</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.72&nbsp;&ndash;&nbsp;0.12</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.82</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.085</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">phosphorus > 7Mg</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.44</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.46</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.41&nbsp;&ndash;&nbsp;-0.48</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;3.15</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.005</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">better hospitalization</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.08</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.32</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.59&nbsp;&ndash;&nbsp;0.76</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.26</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.797</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">expected hospitalization</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.70</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.15</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.38&nbsp;&ndash;&nbsp;1.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.55</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">worse hospitalization</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.52</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.22</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.05&nbsp;&ndash;&nbsp;0.98</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.34</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.031</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">better hospital<br>readmission</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.38</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.24</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.13&nbsp;&ndash;&nbsp;0.88</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.55</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.139</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">expected hospital<br>readmission</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.31</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.13</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03&nbsp;&ndash;&nbsp;0.60</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.34</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.031</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">worse hospital<br>readmission</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.09</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.24</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.41&nbsp;&ndash;&nbsp;0.59</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.39</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.704</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">better survival</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.57</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.15</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.88&nbsp;&ndash;&nbsp;-0.27</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;3.94</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">worse survival</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.91</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.14</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.20&nbsp;&ndash;&nbsp;-0.62</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;6.64</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">incident transplant<br>waitlist better</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.01</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.13</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.27&nbsp;&ndash;&nbsp;0.29</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.09</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.926</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">incident transplant<br>waitlist expected</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.05&nbsp;&ndash;&nbsp;0.12</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.82</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.421</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">incident transplant<br>waitlist worse</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.31</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.12</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.06&nbsp;&ndash;&nbsp;0.56</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.61</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.018</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">prevalent transplant<br>waitlist better</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.15</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.11</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.08&nbsp;&ndash;&nbsp;0.38</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.36</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.191</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">prevalent transplant<br>waitlist expected</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.10</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.17&nbsp;&ndash;&nbsp;0.25</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.41</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.690</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">prevalent transplant<br>waitlist worse</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.01</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.19</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.39&nbsp;&ndash;&nbsp;0.40</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.03</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.975</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Hgb 10g</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.10</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.05</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.20&nbsp;&ndash;&nbsp;-0.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.14</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.046</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">Hgb 12g</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.36</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.66</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.75&nbsp;&ndash;&nbsp;1.04</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.54</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.597</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; color: #10759B; font-weight: bold; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; color: #10759B; font-weight: bold; text-align:center; border-top:1px solid;\" colspan=\"5\">56</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; color: #10759B; font-weight: bold;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; color: #10759B; font-weight: bold; text-align:center;\" colspan=\"5\">1.000 / 1.000</td>\n</tr>\n\n</table>\n\n`````\n:::\n:::\n\n\n\n## PCA Implementation\n\n### SVD - Singular Value Decomposition\n\nWe will focus on Singular Value Decomposition which is a classic approach for PCA analysis.\n\nSingular Value Decomposition is a factorization technique used in linear algebra to decompose a matrix into three matrices.\n\n1.  $L$: A matrix whose columns are the left singular vectors of the original matrix.\n\n2.  $D$: A diagonal matrix whose entries are the singular values of the original matrix.\n\n3.  $R$: A matrix whose columns are the right singular vectors of the original matrix.\n\nThe SVD is closely related to the eigenvalue decomposition (EVD), which is another factorization technique used in linear algebra. While the EVD can only be applied to square matrices, the SVD can be applied to any matrix, including rectangular matrices. The SVD is also more numerically stable than the EVD, making it a preferred method for many applications.\n\n-   Note: The Spectral Decomposition approach is used with the princomp() function.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Apply PCA using prcomp()\ndata_pca <- prcomp(train_data_sc, center = TRUE, scale. = TRUE)\npca_summ <- summary(data_pca)$importance\n\n# Transpose the matrix\ntransposed_pca_summ <- t(pca_summ)\n\n# table format\nkbl(transposed_pca_summ, caption = \"Pricipal Components Analysis\",\n    digits = 4) %>%\n  kable_paper(\"hover\")\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-16}Pricipal Components Analysis}\n\\centering\n\\begin{tabular}[t]{l|r|r|r}\n\\hline\n  & Standard deviation & Proportion of Variance & Cumulative Proportion\\\\\n\\hline\nPC1 & 3.8854 & 0.4080 & 0.4080\\\\\n\\hline\nPC2 & 1.8717 & 0.0947 & 0.5027\\\\\n\\hline\nPC3 & 1.8377 & 0.0913 & 0.5940\\\\\n\\hline\nPC4 & 1.7487 & 0.0826 & 0.6766\\\\\n\\hline\nPC5 & 1.4227 & 0.0547 & 0.7313\\\\\n\\hline\nPC6 & 1.2508 & 0.0423 & 0.7736\\\\\n\\hline\nPC7 & 1.1280 & 0.0344 & 0.8080\\\\\n\\hline\nPC8 & 1.0933 & 0.0323 & 0.8403\\\\\n\\hline\nPC9 & 0.9449 & 0.0241 & 0.8644\\\\\n\\hline\nPC10 & 0.9081 & 0.0223 & 0.8867\\\\\n\\hline\nPC11 & 0.8185 & 0.0181 & 0.9048\\\\\n\\hline\nPC12 & 0.7790 & 0.0164 & 0.9212\\\\\n\\hline\nPC13 & 0.6815 & 0.0126 & 0.9338\\\\\n\\hline\nPC14 & 0.6366 & 0.0110 & 0.9447\\\\\n\\hline\nPC15 & 0.5710 & 0.0088 & 0.9535\\\\\n\\hline\nPC16 & 0.5055 & 0.0069 & 0.9604\\\\\n\\hline\nPC17 & 0.5018 & 0.0068 & 0.9673\\\\\n\\hline\nPC18 & 0.4884 & 0.0064 & 0.9737\\\\\n\\hline\nPC19 & 0.4625 & 0.0058 & 0.9795\\\\\n\\hline\nPC20 & 0.4169 & 0.0047 & 0.9842\\\\\n\\hline\nPC21 & 0.3534 & 0.0034 & 0.9876\\\\\n\\hline\nPC22 & 0.3247 & 0.0029 & 0.9904\\\\\n\\hline\nPC23 & 0.2884 & 0.0022 & 0.9926\\\\\n\\hline\nPC24 & 0.2604 & 0.0018 & 0.9945\\\\\n\\hline\nPC25 & 0.2259 & 0.0014 & 0.9959\\\\\n\\hline\nPC26 & 0.2149 & 0.0013 & 0.9971\\\\\n\\hline\nPC27 & 0.1982 & 0.0011 & 0.9982\\\\\n\\hline\nPC28 & 0.1670 & 0.0008 & 0.9989\\\\\n\\hline\nPC29 & 0.1268 & 0.0004 & 0.9994\\\\\n\\hline\nPC30 & 0.1091 & 0.0003 & 0.9997\\\\\n\\hline\nPC31 & 0.0838 & 0.0002 & 0.9999\\\\\n\\hline\nPC32 & 0.0509 & 0.0001 & 0.9999\\\\\n\\hline\nPC33 & 0.0317 & 0.0000 & 1.0000\\\\\n\\hline\nPC34 & 0.0287 & 0.0000 & 1.0000\\\\\n\\hline\nPC35 & 0.0143 & 0.0000 & 1.0000\\\\\n\\hline\nPC36 & 0.0081 & 0.0000 & 1.0000\\\\\n\\hline\nPC37 & 0.0049 & 0.0000 & 1.0000\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### PCA - Elements\n\n-   The values in \\`**`` data_pca$x` ``** are the coordinates of each observation in the new principal component space. These coordinates are the scores for each observation along each principal component.\n\n-   The eigenvectors of the covariance, or correlation matrix of the data represent the directions of maximum variance, or information in the dataset.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Principal Component scores vector\npc_scores <- data_pca$x\n\n# Std Deviation of Components\ncomponent_sdev <- data_pca$sdev\n\n# Eigenvector, or Loadings\npc_loadings <- data_pca$rotation\n\n# Mean of variables\ncomponent_mean <- data_pca$center \n\n# Scaling factor of Variables\ncomponent_scale <- data_pca$scale\n```\n:::\n\n\n\n### Loadings of First Two Components\n\n-   The loading \\`data_pca\\$rotation\\` are the weights assigned to each original variable for that particular principal component.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Access the loadings for the first two principal components\nloadings_first_two_components <- pc_loadings[, 1:2]\n\n# Print the loadings for the first two principal components\n# print(loadings_first_two_components)\n\n# table format\nkbl(loadings_first_two_components, \n    caption = \"Loadings of First Two Principal Components\",\n    digits = 4) %>%\n  kable_paper(\"hover\")\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-18}Loadings of First Two Principal Components}\n\\centering\n\\begin{tabular}[t]{l|r|r}\n\\hline\n  & PC1 & PC2\\\\\n\\hline\nbetter\\_transfusion & 0.0506 & 0.0151\\\\\n\\hline\nexpected\\_transfusion & 0.2536 & -0.0214\\\\\n\\hline\nworse\\_transfusion & 0.2058 & -0.1647\\\\\n\\hline\nbetter\\_infection & 0.2526 & -0.0073\\\\\n\\hline\nexpected\\_infection & 0.2455 & -0.0652\\\\\n\\hline\nworse\\_infection & 0.1381 & 0.0637\\\\\n\\hline\nKt\\_v\\_1.2 & 0.0031 & 0.0081\\\\\n\\hline\nKt\\_v\\_1.7 & -0.0078 & 0.0444\\\\\n\\hline\npedriatic\\_Kt\\_v\\_1.2 & -0.0636 & 0.0527\\\\\n\\hline\npediatric\\_Kt\\_v\\_1.8 & -0.0139 & 0.0028\\\\\n\\hline\npediatric\\_nPCR & -0.0394 & 0.0768\\\\\n\\hline\nbetter\\_fistula & 0.1701 & 0.1849\\\\\n\\hline\nexpected\\_fistula & 0.2521 & -0.0558\\\\\n\\hline\nworse\\_fistula & 0.1932 & -0.0481\\\\\n\\hline\nlong\\_term\\_catheter & -0.0054 & 0.0409\\\\\n\\hline\nhypercalcemia\\_calcium > 10.2Mg & -0.0276 & 0.1049\\\\\n\\hline\nphosphorus < 3.5Mg & 0.0161 & 0.3759\\\\\n\\hline\nphosphorus (3.5 - 4.5) Mg & 0.0420 & 0.4258\\\\\n\\hline\nphosphorus (4.6 - 5.5) Mg & 0.0888 & 0.2665\\\\\n\\hline\nphosphorus (5.6 - 7) Mg & -0.0954 & -0.3297\\\\\n\\hline\nphosphorus > 7Mg & -0.0293 & -0.4400\\\\\n\\hline\nbetter\\_hospitalization & 0.1555 & 0.0398\\\\\n\\hline\nexpected\\_hospitalization & 0.2535 & -0.0353\\\\\n\\hline\nworse\\_hospitalization & 0.1863 & -0.1048\\\\\n\\hline\nbetter\\_hospital\\_readmission & 0.2100 & -0.0462\\\\\n\\hline\nexpected\\_hospital\\_readmission & 0.2537 & -0.0414\\\\\n\\hline\nworse\\_hospital\\_readmission & 0.2010 & -0.0432\\\\\n\\hline\nbetter\\_survival & 0.1523 & 0.1688\\\\\n\\hline\nworse\\_survival & 0.2288 & -0.0662\\\\\n\\hline\nincident\\_transplant\\_waitlist\\_better & 0.2016 & 0.1513\\\\\n\\hline\nincident\\_transplant\\_waitlist\\_expected & 0.2499 & -0.0578\\\\\n\\hline\nincident\\_transplant\\_waitlist\\_worse & 0.1913 & -0.0199\\\\\n\\hline\nprevalent\\_transplant\\_waitlist\\_better & 0.1618 & 0.1763\\\\\n\\hline\nprevalent\\_transplant\\_waitlist\\_expected & 0.2501 & -0.0703\\\\\n\\hline\nprevalent\\_transplant\\_waitlist\\_worse & 0.1202 & -0.2285\\\\\n\\hline\nHgb 10g & -0.0299 & -0.0804\\\\\n\\hline\nHgb 12g & -0.0006 & 0.1765\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### PCA - Cumulative Variance\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Proportion of variance explained by each PC\nvariance_explained <- component_sdev^2 / sum(component_sdev^2)\n\n# Cumulative proportion of variance explained\ncumulative_variance_explained <- cumsum(variance_explained)\n\n# Create a data frame with an index column\ncumulative_variance_explained_df <- data.frame(\n  Pincipal_Component = 1:length(cumulative_variance_explained),\n  Cumulative_Variance_Explained = cumulative_variance_explained\n)\n\n# Create a kable table with an index column\nkbl(cumulative_variance_explained_df, align = \"cl\",\n    caption = \"PCA: Cumulative Variance Explained\",\n    digits = 4) %>%\n  kable_paper(\"hover\")\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-19}PCA: Cumulative Variance Explained}\n\\centering\n\\begin{tabular}[t]{c|l}\n\\hline\nPincipal\\_Component & Cumulative\\_Variance\\_Explained\\\\\n\\hline\n1 & 0.4080\\\\\n\\hline\n2 & 0.5027\\\\\n\\hline\n3 & 0.5940\\\\\n\\hline\n4 & 0.6766\\\\\n\\hline\n5 & 0.7313\\\\\n\\hline\n6 & 0.7736\\\\\n\\hline\n7 & 0.8080\\\\\n\\hline\n8 & 0.8403\\\\\n\\hline\n9 & 0.8644\\\\\n\\hline\n10 & 0.8867\\\\\n\\hline\n11 & 0.9048\\\\\n\\hline\n12 & 0.9212\\\\\n\\hline\n13 & 0.9338\\\\\n\\hline\n14 & 0.9447\\\\\n\\hline\n15 & 0.9535\\\\\n\\hline\n16 & 0.9604\\\\\n\\hline\n17 & 0.9673\\\\\n\\hline\n18 & 0.9737\\\\\n\\hline\n19 & 0.9795\\\\\n\\hline\n20 & 0.9842\\\\\n\\hline\n21 & 0.9876\\\\\n\\hline\n22 & 0.9904\\\\\n\\hline\n23 & 0.9927\\\\\n\\hline\n24 & 0.9945\\\\\n\\hline\n25 & 0.9959\\\\\n\\hline\n26 & 0.9971\\\\\n\\hline\n27 & 0.9982\\\\\n\\hline\n28 & 0.9989\\\\\n\\hline\n29 & 0.9994\\\\\n\\hline\n30 & 0.9997\\\\\n\\hline\n31 & 0.9999\\\\\n\\hline\n32 & 0.9999\\\\\n\\hline\n33 & 1.0000\\\\\n\\hline\n34 & 1.0000\\\\\n\\hline\n35 & 1.0000\\\\\n\\hline\n36 & 1.0000\\\\\n\\hline\n37 & 1.0000\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### PCA - Number of Principal Components\n\n-   We can conclude that 9 Principal Components explain 86% of the variance.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Retain components that explain a percentage of the variance\nnum_components <- which(cumulative_variance_explained >= 0.86)[1]\n\n# Select the desired number of principal components\nselected_pcs <- pc_scores[, 1:num_components]\n\n# table format\nkbl(selected_pcs, caption = \"Components Explaining 86% Variance\",\n    digits = 4) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-20}Components Explaining 86% Variance}\n\\centering\n\\begin{tabular}[t]{r|r|r|r|r|r|r|r|r}\n\\hline\nPC1 & PC2 & PC3 & PC4 & PC5 & PC6 & PC7 & PC8 & PC9\\\\\n\\hline\n-3.1378 & 0.7718 & -0.7364 & -0.9222 & -0.3593 & 0.3854 & 1.7645 & 0.7137 & -1.2776\\\\\n\\hline\n0.9109 & -1.3736 & -0.8907 & -0.0460 & 0.0228 & 0.3267 & 1.9095 & 0.3203 & 0.3158\\\\\n\\hline\n-1.3650 & -1.7656 & -0.1449 & 0.2592 & -1.2857 & -0.3762 & -0.7856 & -0.9204 & -1.2626\\\\\n\\hline\n-3.0594 & 0.3348 & -0.0141 & -0.1395 & 0.0920 & -0.2825 & -0.1286 & 0.1373 & 0.0780\\\\\n\\hline\n-0.1991 & -0.2073 & -0.7149 & -1.3756 & -1.1993 & 0.0319 & 0.7499 & 0.7160 & -0.1954\\\\\n\\hline\n15.2032 & 2.6187 & -7.7363 & 4.0519 & -0.8244 & -2.8218 & -0.3937 & 0.7540 & 0.1236\\\\\n\\hline\n-1.1596 & 1.1216 & -0.7112 & -0.6842 & 0.2286 & -0.3821 & -0.5148 & -1.3731 & 0.5560\\\\\n\\hline\n-1.7567 & 2.4464 & 0.2336 & -0.7871 & -0.1098 & -1.0603 & -0.1434 & -1.6411 & 1.1462\\\\\n\\hline\n-2.5605 & 1.0785 & -0.0207 & -0.0018 & -0.2474 & 1.1930 & -0.1234 & 1.6484 & 1.1223\\\\\n\\hline\n-2.2725 & 0.7670 & -0.0552 & -1.0045 & 2.4430 & -1.8092 & 1.3011 & 0.0402 & 0.7853\\\\\n\\hline\n10.2101 & -3.0951 & 5.5631 & -2.7079 & -3.2328 & -1.4788 & -1.0195 & 0.3946 & 0.0182\\\\\n\\hline\n5.1286 & -1.7705 & 1.7849 & -0.1628 & 0.5176 & -0.3672 & 1.2737 & 0.3839 & -0.1914\\\\\n\\hline\n-3.4958 & -4.4206 & -3.1425 & 0.0404 & -0.7928 & 0.4217 & 0.1087 & -1.1395 & -1.5791\\\\\n\\hline\n-1.7134 & 0.8230 & -1.9663 & -1.0871 & 0.7505 & 0.4357 & 1.1010 & 0.8853 & -1.1906\\\\\n\\hline\n-1.9511 & 0.9075 & -0.3459 & -1.4707 & -0.7735 & -0.7810 & -1.0116 & -1.4774 & 0.2215\\\\\n\\hline\n-2.6296 & 0.9149 & -0.5263 & -1.3484 & -0.9348 & 0.5181 & 0.3570 & 0.8863 & -0.4488\\\\\n\\hline\n4.7463 & 0.3146 & 2.3709 & -0.2528 & 0.8329 & 1.4290 & -0.8492 & 0.0128 & -0.0479\\\\\n\\hline\n0.3868 & -0.9290 & 0.6870 & -0.6117 & 1.5374 & -0.1113 & 0.2265 & 0.7691 & -0.8385\\\\\n\\hline\n-1.6767 & 0.2850 & -0.9842 & -1.8133 & -0.8136 & 0.7518 & 0.8450 & -0.2605 & 0.7893\\\\\n\\hline\n-0.7345 & -1.3222 & 0.3700 & -0.8448 & 2.0553 & -1.6018 & 0.7571 & -1.1866 & 1.6751\\\\\n\\hline\n0.9393 & -0.6999 & -0.1399 & -0.5978 & -0.0203 & -0.0046 & 1.3170 & 0.4944 & 0.4746\\\\\n\\hline\n-0.8326 & 1.5874 & -0.7312 & 0.2910 & 0.1199 & 1.1100 & -1.6455 & 1.1312 & -0.0448\\\\\n\\hline\n0.8725 & 1.0451 & 0.2775 & 0.2175 & -0.6226 & 0.5429 & -0.2118 & 0.9699 & 1.6165\\\\\n\\hline\n-2.7730 & 0.5328 & -0.3857 & -0.9341 & 0.8943 & -2.7237 & -0.4738 & -2.6266 & 1.1451\\\\\n\\hline\n2.0146 & 0.0014 & 0.6403 & -0.6929 & -0.1677 & 0.4555 & -0.3840 & 0.2754 & 1.0045\\\\\n\\hline\n-1.1376 & 0.6676 & 0.0612 & 0.2444 & -0.4465 & 0.9265 & -0.6966 & 0.9414 & 0.1757\\\\\n\\hline\n0.1256 & -0.9951 & 1.1503 & -0.4897 & 0.7108 & 1.3854 & 0.0279 & -0.3615 & -0.4521\\\\\n\\hline\n-3.6486 & -5.1247 & 0.0491 & 6.3322 & -1.4438 & 1.4726 & -0.7719 & -0.9060 & 2.9209\\\\\n\\hline\n-0.3307 & 0.2793 & -0.0985 & -0.3388 & -0.5950 & -0.5761 & 2.0137 & 0.0524 & 0.9485\\\\\n\\hline\n-3.1386 & -2.4847 & -2.0044 & 1.0661 & -0.5877 & -0.0292 & -0.7689 & -0.0432 & -0.9302\\\\\n\\hline\n1.8304 & -0.8659 & -0.6292 & -0.2888 & -0.3585 & 1.1522 & 1.4099 & -0.2387 & 0.1117\\\\\n\\hline\n-2.6300 & 1.8820 & 1.4790 & 1.5197 & 0.1484 & 0.9943 & 1.0138 & 1.7547 & -0.2904\\\\\n\\hline\n-1.9654 & 1.4437 & 0.4239 & -1.4217 & 0.3452 & 0.1489 & 0.2267 & 0.8292 & 0.0537\\\\\n\\hline\n-2.9434 & -0.4453 & -0.1869 & 0.0501 & -0.3471 & -0.3884 & -1.8441 & 0.4520 & 0.3853\\\\\n\\hline\n1.9335 & 4.2274 & -1.5429 & -0.8354 & -0.5412 & 2.3739 & -0.2919 & 0.2478 & 0.0526\\\\\n\\hline\n-1.4611 & 0.5551 & -1.4467 & -0.2732 & 0.4168 & -0.3335 & 0.0306 & 1.0760 & -0.1292\\\\\n\\hline\n-1.6820 & -0.9253 & -0.3177 & -0.2737 & -0.7852 & 0.2036 & -0.4687 & 0.5302 & -0.4388\\\\\n\\hline\n6.7595 & 3.6388 & 1.0562 & 2.3514 & 2.4970 & 3.4372 & -1.4276 & -3.6075 & -1.6018\\\\\n\\hline\n3.4507 & -1.1824 & 2.5699 & -1.1129 & -0.0546 & 1.4361 & -0.6591 & -1.0345 & -0.1605\\\\\n\\hline\n-1.0984 & -1.5241 & -0.5320 & -0.4777 & -0.9995 & -0.8030 & -0.1950 & -1.6084 & -0.6964\\\\\n\\hline\n-1.9193 & -0.0165 & -1.0806 & -0.5872 & -0.6324 & -0.2014 & -1.3158 & -1.3027 & 0.1718\\\\\n\\hline\n3.4962 & 1.5199 & 1.3109 & -0.3007 & 2.5985 & 1.0499 & -0.2313 & -0.0969 & 0.8464\\\\\n\\hline\n-0.2522 & 3.0718 & 2.1407 & -1.9255 & -2.2719 & -3.4093 & -2.1544 & 0.2271 & -1.2587\\\\\n\\hline\n-3.0135 & -0.6858 & -1.1712 & -0.8551 & -0.4428 & 0.8391 & -1.0039 & 0.4085 & -0.1121\\\\\n\\hline\n0.3392 & -0.5133 & 0.0391 & -0.1766 & -0.5924 & 1.0593 & 1.1663 & 0.5207 & -0.3248\\\\\n\\hline\n-2.1136 & 2.6100 & 0.5330 & -0.8478 & 0.0752 & 0.1416 & 1.0927 & -0.3588 & 1.3478\\\\\n\\hline\n1.3707 & -2.9104 & 1.0848 & 1.3163 & 6.1381 & -2.1436 & 0.9717 & 0.1946 & -1.2873\\\\\n\\hline\n13.0708 & -2.7257 & 0.4257 & -0.4752 & -0.7834 & 0.5789 & 0.9620 & 0.5196 & -0.2282\\\\\n\\hline\n-2.6465 & -0.3807 & -0.6944 & 1.0365 & -0.9202 & 0.4536 & 0.2146 & -0.6048 & -0.7532\\\\\n\\hline\n1.7505 & -0.1798 & -0.2689 & -0.3411 & 0.6075 & -0.7767 & -0.0058 & 0.2781 & 1.5233\\\\\n\\hline\n-3.3725 & 3.5365 & 5.3271 & 7.7627 & -2.3163 & -1.7961 & 2.1724 & -0.1875 & -1.1131\\\\\n\\hline\n-3.1242 & -1.0424 & 0.8044 & 2.1331 & 2.8559 & -0.9073 & -3.9502 & 3.0657 & -0.2529\\\\\n\\hline\n-1.0177 & -1.6718 & -1.8286 & 0.3950 & -0.4653 & 0.8616 & -0.2457 & -0.1711 & -0.3817\\\\\n\\hline\n-0.3396 & 0.7505 & 0.9596 & -0.3014 & 0.5726 & 0.0189 & -0.0433 & 0.0637 & 0.6271\\\\\n\\hline\n-2.2360 & -0.6559 & 0.7765 & 0.2318 & -0.2785 & -0.3448 & -0.0371 & 0.7968 & -1.0752\\\\\n\\hline\n-3.1511 & 0.1807 & -1.0702 & -0.4912 & -0.2143 & -0.6257 & 0.7831 & -1.3442 & -1.6736\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n## Visualization\n\n### Scree Plot - Cumulative Variance Explained\n\n-   PC1 explains 40.8% variance.\n\n-   PC2 explains 9.5% variance.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfviz_eig(data_pca, addlabels = TRUE)\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-21-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Biplot\n\n-   The correlation between a variable and a principal component (PC) is used as the coordinates of the variable on the PC. The representation of variables differs from the plot of the observations: The observations are represented by their projections, but the variables are represented by their correlations @abdi2010principal.\n\n-   PC1 is represented in black which displays the longest distance of its projection.\n\n-   PC2 is represented in blue which displays a shorter distance as expected.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfviz_pca_biplot(data_pca, \n                geom = c(\"point\", \"arrow\"),\n                geom.var = \"arrow\")\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-22-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Correlation Circle\n\nThe plot below is also known as variable correlation plots. It shows the relationships between all variables. It can be interpreted as follow:\n\n-   Positively correlated variables are grouped together.\n\n-   Negatively correlated variables are positioned on opposite sides of the plot origin (opposed quadrants).\n\n-   The distance between variables and the origin measures the quality of the variables on the factor map. Variables that are away from the origin are well represented on the factor map.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Control variable colors using their contributions\nfviz_pca_var(data_pca, col.var = \"contrib\",\n   gradient.cols = c(\"white\", \"blue\", \"red\"),\n   geom.var = \"arrow\",\n   ggtheme = theme_minimal())\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-23-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n### Variable Contribution\n\nTop variable contribution for the first two principal components.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Contributions of variables to PC1\npc2_contribution <- fviz_contrib(data_pca, choice = \"var\", axes = 1, top = 20)\n\n# Modify the theme to rotate X-axis labels to 90 degrees\npc2_contribution +\n  theme(\n    axis.text.x = element_text(angle = 0),\n    plot.title = element_text(hjust = 0)  # horizontal justification\n  ) +\n  coord_flip() +\n  labs(title = \"Contribution of Variables to PC1\",\n       y = \"Percentage Contribution\",\n       x = \"\",\n       caption = \"PC1 explains 40.8% variance\") +\n  scale_y_continuous(labels = scales::percent_format(scale = 1,\n                                                     accuracy = 1))\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-24-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\n# Contributions of variables to PC2\npc2_contribution <- fviz_contrib(data_pca, choice = \"var\", axes = 2, top = 12)\n\n# Modify the theme to rotate X-axis labels to 90 degrees\npc2_contribution +\n  theme(\n    axis.text.x = element_text(angle = 0),\n    plot.title = element_text(hjust = 0)  # horizontal justification\n  ) +\n  coord_flip() +\n  labs(title = \"Contribution of Variables to PC2\",\n       y = \"Percentage Contribution\",\n       x = \"\",\n       caption = \"PC2 explains 9.5% variance\") +\n  scale_y_continuous(labels = scales::percent_format(scale = 1,\n                                                     accuracy = 1))\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-24-2.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n## Model Building\n\n### Data Splitting into Training & Test set\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# reproducible random sampling\nset.seed(my_seed)  \n \n# Create Target y-variable for the training set\ny <- train_data$expected_survival  \n# Split the data into training and test sets \nsplit <- sample.split(y, SplitRatio = 0.7) \ntraining_set <- subset(train_data, split == TRUE) \ntest_set <- subset(train_data, split == FALSE) \n```\n:::\n\n\n\n### Feature Scaling: Standardization\n\n-   Standardization ensures all features are on the same scale, and this method is less sensitive to outliers.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Feature Scaling: Standardization\n# Perform centering and scaling on the training and test sets\nsc <- preProcess(training_set[, -target_index], \n                 method = c(\"center\", \"scale\"))\ntraining_set[, -target_index] <- predict(\n  sc, training_set[, -target_index])\ntest_set[, -target_index] <- predict(sc, test_set[, -target_index])\n```\n:::\n\n\n\n### Applying PCA to Training & Test sets\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Perform Principal Component Analysis (PCA) preprocessing on the training data\npca <- preProcess(training_set[, -target_index], \n                  method = 'pca', pcaComp = 8)\n\n# Apply PCA transformation to original training set\ntraining_set <- predict(pca, training_set)\n\n# Reorder columns, moving the dependent feature index to the end\ntraining_set <- training_set[c(2:9, 1)]\n\n# Apply PCA transformation to original test set\ntest_set <- predict(pca, test_set)\n\n# Reorder columns, moving the dependent feature index to the end\ntest_set <- test_set[c(2:9, 1)]\n```\n:::\n\n::: {.cell}\n\n:::\n\n\n\n## PCA Full Model: 8 Principal Components\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# reproducible random sampling\nset.seed(my_seed)\n\n# Fit a multiple linear regression model\npca_full_model <- lm(expected_survival ~ ., data = training_set)\n\n# Print a summary of the regression model\ntab_model(pca_full_model, title = \"8 Principal Components Regression\",\n          string.p=\"P-value\", string.stat = \"T-score\",\n          string.se = \"Std. Error\",\n          string.resp = \"Response\",\n          string.ci = \"Conf Int.\",\n          show.se=T, show.stat = T,\n          CSS = list(\n             css.depvarhead = 'font-weight: bold; text-align: left;',\n             css.summary = 'color: #10759B; font-weight: bold;'\n           ))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<caption style=\"font-weight: bold; text-align:left;\">8 Principal Components Regression</caption>\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; \">&nbsp;</th>\n<th colspan=\"5\" style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black;\">expected_survival</th>\n</tr>\n<tr>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; text-align:left; \">Predictors</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Estimates</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Std. Error</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Conf Int.</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">T-score</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">P-value</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">97.05</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.84</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">91.25&nbsp;&ndash;&nbsp;102.85</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">34.19</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">29.40</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.71</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">27.95&nbsp;&ndash;&nbsp;30.86</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">41.22</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.59</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.33</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.87&nbsp;&ndash;&nbsp;7.31</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">3.44</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.002</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC3</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.11</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.64</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;4.46&nbsp;&ndash;&nbsp;2.24</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;0.68</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.504</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC4</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.99</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.75</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.42&nbsp;&ndash;&nbsp;8.56</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.85</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.008</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC5</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;3.27</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.25</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;7.86&nbsp;&ndash;&nbsp;1.31</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.46</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.156</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC6</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">6.98</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.44</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.01&nbsp;&ndash;&nbsp;11.95</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.87</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.008</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC7</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;6.60</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.56</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;11.83&nbsp;&ndash;&nbsp;-1.37</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;2.58</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.015</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC8</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">3.80</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.82</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">&#45;1.96&nbsp;&ndash;&nbsp;9.56</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.35</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.188</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; color: #10759B; font-weight: bold; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; color: #10759B; font-weight: bold; text-align:center; border-top:1px solid;\" colspan=\"5\">39</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; color: #10759B; font-weight: bold;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; color: #10759B; font-weight: bold; text-align:center;\" colspan=\"5\">0.983 / 0.979</td>\n</tr>\n\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\n# Calculate PRESS\n# cat(\"PRESS: \", PRESS(pca_full_model), \"\\n\")\nPRESS_8pc <- PRESS(pca_full_model)\n# Calculate predicted R^2\n# cat(\"Predicted R^2: \", pred_r_squared(pca_full_model), \"\\n\")\nR2_8pcs <- pred_r_squared(pca_full_model)\n\npredict_8pc <- cbind(PRESS_8pc, R2_8pcs)\n# Print PRESS, predicted R^2\n# table format\nkbl(predict_8pc, caption = \"8 Principal Components Prediction Metrics\",\n    digits = 4) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-29}8 Principal Components Prediction Metrics}\n\\centering\n\\begin{tabular}[t]{r|r}\n\\hline\nPRESS\\_8pc & R2\\_8pcs\\\\\n\\hline\n31662.39 & 0.943\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### Visualization of Uncorrelated PCA Matrix\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Visual of Principal Components un-correlation\ncorr_matrix <- cor(training_set)\nggcorrplot(corr_matrix)\n```\n\n::: {.cell-output-display}\n![](analysis_files/figure-pdf/unnamed-chunk-30-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n## PCA: 2 Principal Components\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a subset with 2 principal components\nsignificant_pcs = c(1,2,9)\ntrain_pca <- training_set[, significant_pcs]\ntest_pca <- test_set[, significant_pcs]\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# reproducible random sampling\nset.seed(my_seed)\n\n# Fit a multiple linear regression model\nreg_model <- lm(expected_survival ~ ., \n                data = train_pca)\n\n# Print a summary of the regression model\ntab_model(reg_model, title = \"2 Principal Components Regression\",\n          string.p=\"P-value\", string.stat = \"T-score\",\n          string.se = \"Std. Error\",\n          string.resp = \"Response\",\n          string.ci = \"Conf Int.\",\n          show.se=T, show.stat = T,\n          CSS = list(\n             css.depvarhead = 'font-weight: bold; text-align: left;',\n             css.summary = 'color: #10759B; font-weight: bold;'\n           ))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table style=\"border-collapse:collapse; border:none;\">\n<caption style=\"font-weight: bold; text-align:left;\">2 Principal Components Regression</caption>\n<tr>\n<th style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black; text-align:left; \">&nbsp;</th>\n<th colspan=\"5\" style=\"border-top: double; text-align:center; font-style:italic; font-weight:normal; padding:0.2cm; border-bottom:1px solid black;\">expected_survival</th>\n</tr>\n<tr>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; text-align:left; \">Predictors</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Estimates</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Std. Error</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">Conf Int.</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">T-score</td>\n<td style=\" font-weight: bold; text-align: left; border-bottom:1px solid black; \">P-value</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">(Intercept)</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">97.05</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">3.58</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">89.78&nbsp;&ndash;&nbsp;104.32</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">27.07</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC1</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">29.40</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">0.90</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">27.58&nbsp;&ndash;&nbsp;31.23</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">32.64</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>&lt;0.001</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; \">PC2</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">4.59</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.68</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">1.18&nbsp;&ndash;&nbsp;8.00</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \">2.73</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:center;  \"><strong>0.010</strong></td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; color: #10759B; font-weight: bold; border-top:1px solid;\">Observations</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; color: #10759B; font-weight: bold; text-align:center; border-top:1px solid;\" colspan=\"5\">39</td>\n</tr>\n<tr>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; text-align:left; color: #10759B; font-weight: bold;\">R<sup>2</sup> / R<sup>2</sup> adjusted</td>\n<td style=\" padding:0.2cm; text-align:left; vertical-align:top; color: #10759B; font-weight: bold; text-align:center;\" colspan=\"5\">0.968 / 0.966</td>\n</tr>\n\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\n# Calculate PRESS\n# cat(\"PRESS: \", PRESS(reg_model), \"\\n\")\nPRESS_2pc <- PRESS(reg_model)\n\n# Calculate predicted R^2\n# cat(\"Predicted R^2: \", pred_r_squared(reg_model), \"\\n\")\nR2_2pc <- pred_r_squared(reg_model)\n\n# Print 2PC prediction results\npredict_2pc <- cbind(PRESS_2pc, R2_2pc)\n\n# table format\nkbl(predict_2pc, caption = \"2 Principal Components Prediction Metrics\",\n    digits = 4) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-32}2 Principal Components Prediction Metrics}\n\\centering\n\\begin{tabular}[t]{r|r}\n\\hline\nPRESS\\_2pc & R2\\_2pc\\\\\n\\hline\n25699.6 & 0.9538\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### **Principal Components Regression**\n\n-   PCA is used to calculate principal components that can then be used inprincipal components regression. This type of regression is often used whenmulticollinearityexists between predictors in a data set.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# reproducible random sampling\nset.seed(my_seed)\n\ny = train_pca$expected_survival\n\n# fit PCR\npcr_model <- pcr(y ~ PC1+PC2, data=train_pca, validation=\"CV\")\nprint(pcr_model)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nPrincipal component regression, fitted with the singular value decomposition algorithm.\nCross-validated using 10 random segments.\nCall:\npcr(formula = y ~ PC1 + PC2, data = train_pca, validation = \"CV\")\n```\n:::\n\n```{.r .cell-code}\n# table format\nkbl(pcr_model$residuals, caption = \"PCA Residuals\",\n    digits = 4) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-33}PCA Residuals}\n\\centering\n\\begin{tabular}[t]{l|r|r}\n\\hline\n  & y.1 comps & y.2 comps\\\\\n\\hline\n1 & 0.1506 & -0.7094\\\\\n\\hline\n2 & 14.8415 & 8.7438\\\\\n\\hline\n3 & -9.9048 & -15.6499\\\\\n\\hline\n4 & -11.9950 & -10.5934\\\\\n\\hline\n5 & 14.5581 & 7.4172\\\\\n\\hline\n6 & 10.5628 & -4.1105\\\\\n\\hline\n7 & -1.1997 & -1.8621\\\\\n\\hline\n8 & -13.8770 & -8.7908\\\\\n\\hline\n10 & -10.6707 & -7.5478\\\\\n\\hline\n13 & 15.9325 & -6.8066\\\\\n\\hline\n14 & -28.4995 & -32.2191\\\\\n\\hline\n15 & 13.7912 & 10.2807\\\\\n\\hline\n19 & 2.2654 & -4.9708\\\\\n\\hline\n20 & 20.7004 & 18.6124\\\\\n\\hline\n22 & -22.7913 & -18.7054\\\\\n\\hline\n24 & 0.3036 & -1.8158\\\\\n\\hline\n27 & 15.1056 & 16.6785\\\\\n\\hline\n29 & -18.5425 & -18.3174\\\\\n\\hline\n30 & 7.9759 & -3.5721\\\\\n\\hline\n31 & 61.8084 & 55.7883\\\\\n\\hline\n32 & -20.9204 & -5.0790\\\\\n\\hline\n33 & -12.8183 & -9.2901\\\\\n\\hline\n34 & 1.6594 & -0.6758\\\\\n\\hline\n35 & -17.3032 & -12.3010\\\\\n\\hline\n36 & -17.2435 & -19.9354\\\\\n\\hline\n37 & -4.2019 & -9.4719\\\\\n\\hline\n38 & -90.8171 & -71.1562\\\\\n\\hline\n39 & 57.1428 & 59.6527\\\\\n\\hline\n41 & 10.0589 & 4.0816\\\\\n\\hline\n42 & 18.5721 & 29.7334\\\\\n\\hline\n44 & 3.2955 & -4.0228\\\\\n\\hline\n45 & 8.2807 & 7.3105\\\\\n\\hline\n46 & -17.5634 & -10.1654\\\\\n\\hline\n49 & 14.4348 & 13.0494\\\\\n\\hline\n50 & 5.5387 & 3.5868\\\\\n\\hline\n51 & -9.4323 & 29.4206\\\\\n\\hline\n54 & 10.5787 & 15.4795\\\\\n\\hline\n55 & -1.1796 & 1.1198\\\\\n\\hline\n56 & 1.4025 & -3.1866\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### PCA: Cross-Validation Model\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# reproducible random sampling\nset.seed(my_seed)\n\n# Cross-validation with n folds\nk_10 <- trainControl(method = \"cv\", number = 10)\n\n# training the model \nmodel_cv <- train(expected_survival ~ ., \n                  data = train_pca,\n                  method = \"lm\",\n                  trControl = k_10)\n\n# Print Model Performance\nprint(model_cv)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nLinear Regression \n\n39 samples\n 2 predictor\n\nNo pre-processing\nResampling: Cross-Validated (10 fold) \nSummary of sample sizes: 35, 35, 35, 35, 35, 35, ... \nResampling results:\n\n  RMSE     Rsquared   MAE     \n  21.7825  0.9761582  16.14872\n\nTuning parameter 'intercept' was held constant at a value of TRUE\n```\n:::\n\n```{.r .cell-code}\n# Metrics\ncv_results = model_cv$results\nkbl(cv_results, caption = \"PCA: Cross-Validation Metrics\",\n    digits = 4) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\n\\caption{\\label{tab:unnamed-chunk-34}PCA: Cross-Validation Metrics}\n\\centering\n\\begin{tabular}[t]{l|r|r|r|r|r|r}\n\\hline\nintercept & RMSE & Rsquared & MAE & RMSESD & RsquaredSD & MAESD\\\\\n\\hline\nTRUE & 21.7825 & 0.9762 & 16.1487 & 14.0372 & 0.0377 & 8.5694\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n## Predictions\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Find the index position of the target feature\npred_target_index <- grep(target_name, \n                     colnames(test_pca))\n#cat(\"Target Feature Index =\", pred_target_index)\n\n# Create Predicted Target Feature (y-test) \ny_test <- test_pca[pred_target_index]\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Predictions using the Cross-Validation model\ny_pred = predict(model_cv, newdata = test_pca[, -pred_target_index])\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Prediction Results from y_predictions\ny_pred <- round(y_pred, digits = 0)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Transform y_test from data frame to numeric\ny_test <- as.numeric(unlist(y_test))\n\nprediction_comparison <- cbind(y_pred, y_test)\n# table format\nkbl(prediction_comparison) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tabular}[t]{l|r|r}\n\\hline\n  & y\\_pred & y\\_test\\\\\n\\hline\n9 & 35 & 16\\\\\n\\hline\n11 & 520 & 442\\\\\n\\hline\n12 & 310 & 318\\\\\n\\hline\n16 & 26 & 25\\\\\n\\hline\n17 & 298 & 284\\\\\n\\hline\n18 & 125 & 152\\\\\n\\hline\n21 & 159 & 160\\\\\n\\hline\n23 & 149 & 141\\\\\n\\hline\n25 & 191 & 197\\\\\n\\hline\n26 & 81 & 95\\\\\n\\hline\n28 & 2 & 2\\\\\n\\hline\n40 & 86 & 78\\\\\n\\hline\n43 & 113 & 38\\\\\n\\hline\n47 & 182 & 171\\\\\n\\hline\n48 & 585 & 657\\\\\n\\hline\n52 & 33 & 7\\\\\n\\hline\n53 & 88 & 92\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n### Prediction Metrics\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculate Mean Absolute Error (MAE)\nMAE_value <- mae(y_pred, y_test)\n#cat(\"MAE =\", mae_value)\n\n# Calculate MSE\nMSE_predict <- mean((y_pred - y_test)^2)\n#cat(\"\\nMSE =\", mse_predict)\n\n# Calculate RMSE\nRMSE_predict <- sqrt(mean((y_pred - y_test)^2))\n#cat(\"\\nRMSE =\", rmse_predict)\n\n# Calculate R-squared (R^2)\npredicted_R2 <- 1 - sum((y_test - y_pred)^2) / \n  sum((y_test - mean(y_test))^2)\n# cat(\"\\nPredicted R^2 =\", predicted_r2)\n\nprediction_metrics_df <- cbind(MAE_value, MSE_predict,\n                               RMSE_predict, predicted_R2)\n# table format\nkbl(prediction_metrics_df, digits = 4) %>%\n  kable_paper(\"hover\", full_width = F)\n```\n\n::: {.cell-output-display}\n\\begin{table}\n\\centering\n\\begin{tabular}[t]{r|r|r|r}\n\\hline\nMAE\\_value & MSE\\_predict & RMSE\\_predict & predicted\\_R2\\\\\n\\hline\n21.8824 & 1142.235 & 33.797 & 0.96\\\\\n\\hline\n\\end{tabular}\n\\end{table}\n:::\n:::\n\n\n\n## Training Conclusion\n\nIn conclusion, this project has demonstrated the effectiveness of Principal Component Analysis (PCA) in dimension reduction with the following key points:\n\n-   PCA was able to reduce from 37 features down to just 2 principal components.\n\n-   The best score of R\\^2 = 97.61% was from the Linear Regression with Cross-validation model.\n\n-   The predicted R\\^2 = 96%\n\n-   The average deviation between the predicted values, and observed values for 'Expected Survival' is RMSE = 33.8.\n\n-   The model has not been exposed to unseen data with a large amount of observations to asses its robustness, and reliability.\n",
    "supporting": [
      "analysis_files\\figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {
      "knitr": [
        "{\"type\":\"list\",\"attributes\":{\"knit_meta_id\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"]}},\"value\":[{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"booktabs\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"longtable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"array\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"multirow\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"wrapfig\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"float\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"colortbl\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"pdflscape\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"tabu\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"threeparttable\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"threeparttablex\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"ulem\"]},{\"type\":\"character\",\"attributes\":{},\"value\":[\"normalem\"]},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"makecell\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]},{\"type\":\"list\",\"attributes\":{\"names\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"name\",\"options\",\"extra_lines\"]},\"class\":{\"type\":\"character\",\"attributes\":{},\"value\":[\"latex_dependency\"]}},\"value\":[{\"type\":\"character\",\"attributes\":{},\"value\":[\"xcolor\"]},{\"type\":\"NULL\"},{\"type\":\"NULL\"}]}]}"
      ]
    },
    "preserve": null,
    "postProcess": false
  }
}